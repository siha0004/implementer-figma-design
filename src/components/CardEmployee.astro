---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";

import type { ImageMetadata } from "astro";
// import { normalizeTheLocale } from "astro/virtual-modules/i18n.js";

const { employee } = Astro.props;
const { img, name, title, description } = employee;

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/images/*.{jpeg,jpg,png,gif}");
if (!images[img]) throw new Error(`"${img}" does not exist in glob: "src/assets/images/*.{jpeg,jpg,png,gif}"`);
---

<li>
  <article>
    <Image src={images[img]()} alt={name} />
    <p class="title">{title}</p>

    <div>
      <h3>
        <a href="#">{name}</a>
      </h3>
      <p>{description}</p>
      <ul role="list">
        <li><a href="#"><Icon name="instagram" /></a></li>
        <li><a href="#"><Icon name="facebook" /></a></li>
        <li><a href="#"><Icon name="twitter" /></a></li>
      </ul>
    </div>
  </article>
</li>

<style>
  @layer components {
    article {
      color: var(--text-card);
      background: var(--bg-card);
      position: relative;
      display: grid;
      gap: var(--space-m);

      & > :is(img, .title) {
        grid-area: 1 / 1;
      }

      .title {
        /* display: inline; */
        place-self: end end;
        background-color: var(--brand);
        border-radius: var(--radius-round);

        padding: 1px var(--space-s);
        margin: var(--space-s);
      }

      img {
        border-radius: var(--radius-img);
      }

      div {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-2xs);

        p {
          text-align: center;
        }
      }
      h3 > a {
        color: currentcolor;
        text-decoration: none;

        &::after {
          content: "";
          position: absolute;
          inset: 0;
        }
      }
      ul {
        display: flex;
        justify-content: center;
        gap: var(--space-xl);
        z-index: 1;
      }
    }
  }
</style>
